<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro Graphic Pro</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #121212; margin: 0; display: flex; flex-direction: column; height: 100vh; }
        .nav { background: #1e1e1e; padding: 10px; display: flex; gap: 8px; flex-wrap: wrap; border-bottom: 1px solid #333; }
        .canvas-area { flex-grow: 1; display: flex; justify-content: center; align-items: center; background: #222; overflow: auto; }
        button { background: #333; color: #fff; border: 1px solid #444; padding: 10px 15px; border-radius: 6px; cursor: pointer; font-size: 14px; }
        button:hover { background: #444; border-color: #007bff; }
        canvas { background: white; border-radius: 4px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        input[type="color"] { height: 38px; border: none; background: none; cursor: pointer; }
    </style>
</head>
<body>

<div class="nav">
    <button onclick="addRect()">+ Square</button>
    <button onclick="addCircle()">+ Circle</button>
    <button onclick="addText()">T Text</button>
    <button onclick="toggleDraw()" id="drawBtn">Drawing Mode: OFF</button>
    <input type="color" id="colorPicker" onchange="changeColor(this.value)">
    <button onclick="deleteObj()" style="background: #611;">Delete</button>
    <button onclick="downloadPNG()" style="background: #007bff; font-weight: bold;">Download PNG</button>
</div>

<div class="canvas-area">
    <canvas id="c"></canvas>
</div>

<script>
    const canvas = new fabric.Canvas('c', {
        width: window.innerWidth * 0.9,
        height: window.innerHeight * 0.7,
        backgroundColor: '#ffffff'
    });

    function addRect() { canvas.add(new fabric.Rect({ left: 50, top: 50, fill: '#007bff', width: 100, height: 100 })); }
    function addCircle() { canvas.add(new fabric.Circle({ left: 100, top: 100, fill: '#ff4757', radius: 50 })); }
    function addText() { canvas.add(new fabric.IText('Edit Me', { left: 150, top: 150, fontSize: 24 })); }
    
    function toggleDraw() {
        canvas.isDrawingMode = !canvas.isDrawingMode;
        document.getElementById('drawBtn').innerHTML = canvas.isDrawingMode ? "Drawing Mode: ON" : "Drawing Mode: OFF";
        document.getElementById('drawBtn').style.background = canvas.isDrawingMode ? "#007bff" : "#333";
    }

    function changeColor(c) {
        const obj = canvas.getActiveObject();
        if(obj) { obj.set('fill', c); canvas.renderAll(); }
        canvas.freeDrawingBrush.color = c;
    }

    function deleteObj() {
        canvas.remove(...canvas.getActiveObjects());
        canvas.discardActiveObject().renderAll();
    }

    function downloadPNG() {
        const link = document.createElement('a');
        link.download = 'my-design.png';
        link.href = canvas.toDataURL({ format: 'png', multiplier: 2 });
        link.click();
    }
</script>

</body>
</html>
